# Today I Learned ğŸ¤“

> 2024.03.02 (í† )

## Cancellable

> í™œë™ì´ë‚˜ í–‰ë™ì„ ì·¨ì†Œí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ë‚´ëŠ” í”„ë¡œí† ì½œ
> 
> `iOS 13.0+` `iPadOS 13.0+` `macOS 10.15+`

```swift
protocol Cancellable
```

### ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

Combineì˜ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ì·¨ì†Œí•˜ê³  ì‹¶ì„ ë•Œ Cancellableì„ ì±„íƒí•˜ëŠ” ê°ì²´ì˜ Cancel()ë¥¼ í˜¸ì¶œí•˜ì—¬ í• ë‹¹ëœ ìì›ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì—¬ íƒ€ì´ë¨¸, ë„¤íŠ¸ì›Œí¬ ì•¡ì„¸ìŠ¤ ë˜ëŠ” ë””ìŠ¤í¬ I/Oì™€ ê°™ì€ ë¶€ì‘ìš©ì„ ë©ˆì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

## AnyCancellable

> ì·¨ì†Œë  ë•Œ ì œê³µëœ í´ë¡œì €ë¥¼ ì‹¤í–‰í•˜ëŠ” type-erasure Cancellable ê°ì²´
> 
> `iOS 13.0+` `iPadOS 13.0+` `macOS 10.15+`

```swift
final public class AnyCancellable : Cancellable, Hashable
```

### ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

sinkë¡œ êµ¬ë…í•˜ë©´ AnyCancellableì„ ë°˜í™˜í•˜ê²Œ ë˜ëŠ”ë° ì´ë¥¼ ì´ìš©í•´ ë°œì‹ ìê°€ ê²Œì‹œìë¥¼ ì·¨ì†Œí•  ìˆ˜ ìˆëŠ” "ì·¨ì†Œ í† í°"ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

AnyCancellableì€ ë©”ëª¨ë¦¬ í•´ì œë  ë•Œ ìë™ìœ¼ë¡œ cancel()ë¥¼ í˜¸ì¶œí•˜ê¸° ë•Œë¬¸ì— storeë¡œ ì €ì¥í•´ë’€ë‹¤ê°€ í•´ì œì‹œì¼œ í•œ ë²ˆì— êµ¬ë…ì„ ì·¨ì†Œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
final class ViewModel: ObservableObject {
      
  private var cancelables: [AnyCancellable] = []
  private var useCase: DiaryUseCase
  
  // ...
  private func fetchData() {
    datas = useCase.fetchData()
      .receive(on: DispatchQueue.main)
      .sink { // sink handler }
      .store(in: &cancelables)
  }
}
```

---
## ì°¸ê³  ë§í¬
- [Apple Developer: Cancellable](https://developer.apple.com/documentation/combine/cancellable)
- [Apple Developer: AnyCancellable](https://developer.apple.com/documentation/combine/anycancellable)
- [Apple Developer: store(in:)](https://developer.apple.com/documentation/combine/anycancellable/store(in:)-3hyxs)
